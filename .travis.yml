language: go

go:
  - 1.6
  - 1.7
  - 1.8
  - master

before_install:
  - psql  -c "CREATE DATABASE gloat_test;" -U postgres
  - mysql -e 'CREATE DATABASE myapp_test;'

install:
  - go get github.com/go-sql-driver/mysql
  - go get github.com/lib/pq
  - go get github.com/mattn/go-sqlite3
  - make test

env:
  global:
    - DATABASE_SRC=testdata/migrations
  matrix:
    - DATABASE_URL='postgres://postgres@localhost/gloat_test?sslmode=disable'
    - DATABASE_URL='mysql://travis@127.0.0.1/gloat_test'
    - DATABASE_URL='sqlite://localhost/:memory:'
